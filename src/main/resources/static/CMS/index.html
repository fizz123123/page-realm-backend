<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹³å°ç®¡ç†ä¸»æ§å°</title>
    <link rel="stylesheet" href="/CMS/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function requireAuth() {
            const token = localStorage.getItem('jwt');
            if (!token) {
                window.location.href = '/CMS/login.html';
            }
            return token;
        }

        function logout() {
            localStorage.removeItem('jwt');
            localStorage.removeItem('email');
            localStorage.removeItem('roles');
            window.location.href = '/CMS/login.html';
        }

        function setActive(sectionId) {
            document.querySelectorAll('.content-section').forEach(el => el.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
            document.querySelectorAll('.side a').forEach(a => a.classList.remove('active'));
            const link = document.querySelector(`.side a[data-target="${sectionId}"]`);
            if (link) link.classList.add('active');
        }
    </script>
</head>
<body onload="requireAuth(); setActive('home');">
<div class="layout">
    <aside class="side">
        <div class="brand">CMS</div>
        <div class="user-mini">ğŸ‘¤ <span id="me"></span></div>
        <nav><a href="#" data-target="home" onclick="setActive('home')">é¦–é </a>
            <a href="#" data-target="users" onclick="setActive('users')">ä½¿ç”¨è€…ç®¡ç†</a>
            <a href="#" data-target="books" onclick="setActive('books')">æ›¸ç±ç®¡ç†</a>
            <a href="#" data-target="points" onclick="setActive('points')">é»æ•¸ç®¡ç†</a>
            <a href="#" data-target="coupons" onclick="setActive('coupons')">å„ªæƒ åˆ¸ç®¡ç†</a>
            <a href="#" data-target="admin_logs" onclick="setActive('admin_logs')">ç®¡ç†æ“ä½œè¨˜éŒ„</a>
            <a href="#" data-target="support" onclick="setActive('support')">è¨Šæ¯ç®¡ç†</a>
            <a href="#" data-target="orders" onclick="setActive('orders')">è¨‚å–®ç®¡ç†</a>
        </nav>
        <button class="btn small" onclick="logout()">ç™»å‡º</button>
    </aside>
    <main class="main">
        <header class="topbar">
            <div class="title">å¹³å°ç®¡ç†</div>
        </header>

        <section id="home" class="content-section"></section>
        <section id="users" class="content-section"></section>
        <section id="books" class="content-section"></section>
        <section id="points" class="content-section"></section>
        <section id="coupons" class="content-section"></section>
        <section id="admin_logs" class="content-section"></section>
        <section id="support" class="content-section"></section>
        <section id="orders" class="content-section"></section>
    </main>
</div>

<script src="/CMS/app.js"></script>
</body>
</html>